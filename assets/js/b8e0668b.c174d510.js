"use strict";(self.webpackChunktest_site=self.webpackChunktest_site||[]).push([[2177],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>k});var r=n(7294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var s=r.createContext({}),c=function(e){var t=r.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},p=function(e){var t=c(e.components);return r.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),d=c(n),k=a,m=d["".concat(s,".").concat(k)]||d[k]||u[k]||i;return n?r.createElement(m,o(o({ref:t},p),{},{components:n})):r.createElement(m,o({ref:t},p))}));function k(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,o=new Array(i);o[0]=d;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var c=2;c<i;c++)o[c]=n[c];return r.createElement.apply(null,o)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},2469:(e,t,n)=>{n.r(t),n.d(t,{contentTitle:()=>o,default:()=>p,frontMatter:()=>i,metadata:()=>l,toc:()=>s});var r=n(7462),a=(n(7294),n(3905));const i={sidebar_label:"Linkdrop Basics",sidebar_position:5},o="How Linkdrops Work",l={unversionedId:"Github ReadMe/LinkdropBasics",id:"version-1.1/Github ReadMe/LinkdropBasics",isDocsHomePage:!1,title:"How Linkdrops Work",description:"For some background as to how linkdrops works on NEAR:",source:"@site/versioned_docs/version-1.1/Github ReadMe/LinkdropBasics.md",sourceDirName:"Github ReadMe",slug:"/Github ReadMe/LinkdropBasics",permalink:"/Github ReadMe/LinkdropBasics",editUrl:"https://github.com/facebook/docusaurus/edit/main/website/versioned_docs/version-1.1/Github ReadMe/LinkdropBasics.md",tags:[],version:"1.1",sidebarPosition:5,frontMatter:{sidebar_label:"Linkdrop Basics",sidebar_position:5},sidebar:"version-1.1/tutorialSidebar",previous:{title:"Costs",permalink:"/Github ReadMe/costs"},next:{title:"Querying Information from Keypom",permalink:"/Github ReadMe/Querying"}},s=[{value:"Prerequisites",id:"prerequisites",children:[]},{value:"Deploy Scripts",id:"deploy-scripts",children:[]}],c={toc:s};function p(e){let{components:t,...n}=e;return(0,a.kt)("wrapper",(0,r.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"how-linkdrops-work"},"How Linkdrops Work"),(0,a.kt)("p",null,"For some background as to how linkdrops works on NEAR: "),(0,a.kt)("p",null,(0,a.kt)("em",{parentName:"p"},"The funder that has an account and some $NEAR:")," "),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"creates a keypair locally ",(0,a.kt)("inlineCode",{parentName:"li"},"(pubKey1, privKey1)"),". The blockchain doesn't know of this key's existence yet since it's all local for now."),(0,a.kt)("li",{parentName:"ul"},"calls ",(0,a.kt)("inlineCode",{parentName:"li"},"send")," on the contract and passes in the ",(0,a.kt)("inlineCode",{parentName:"li"},"pubKey1")," as an argument as well as the desired ",(0,a.kt)("inlineCode",{parentName:"li"},"balance")," for the linkdrop.",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"The contract will map the ",(0,a.kt)("inlineCode",{parentName:"li"},"pubKey1")," to the desired ",(0,a.kt)("inlineCode",{parentName:"li"},"balance")," for the linkdrop."),(0,a.kt)("li",{parentName:"ul"},"The contract will then add the ",(0,a.kt)("inlineCode",{parentName:"li"},"pubKey1")," as a ",(0,a.kt)("strong",{parentName:"li"},"function call access key")," with the ability to call ",(0,a.kt)("inlineCode",{parentName:"li"},"claim")," and ",(0,a.kt)("inlineCode",{parentName:"li"},"create_account_and_claim"),". This means that anyone with the ",(0,a.kt)("inlineCode",{parentName:"li"},"privKey1")," that was created locally, can claim this linkdrop. "))),(0,a.kt)("li",{parentName:"ul"},"Funder will then create a link to send to someone that contains this ",(0,a.kt)("inlineCode",{parentName:"li"},"privKey1"),". The link follows the following format: ")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"    wallet.testnet.near.org/linkdrop/{fundingContractAccountId}/{linkdropKeyPairSecretKey}?redirectUrl={redirectUrl}\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"fundingContractAccountId"),": The contract accountId that was used to send the funds."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"linkdropKeyPairSecretKey"),": The corresponding secret key to the public key sent to the contract."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"redirectUrl"),": The url that wallet will redirect to after funds are successfully claimed to an existing account. The URL is sent the accountId used to claim the funds as a query param.")),(0,a.kt)("p",null,(0,a.kt)("em",{parentName:"p"},"The receiver of the link that is claiming the linkdrop:")," "),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Receives the link which includes ",(0,a.kt)("inlineCode",{parentName:"li"},"privKey1")," and sends them to the NEAR wallet."),(0,a.kt)("li",{parentName:"ul"},"Wallet creates a new keypair ",(0,a.kt)("inlineCode",{parentName:"li"},"(pubKey2, privKey2)")," locally. The blockchain doesn't know of this key's existence yet since it's all local for now."),(0,a.kt)("li",{parentName:"ul"},"Receiver will then choose an account ID such as ",(0,a.kt)("inlineCode",{parentName:"li"},"new_account.near"),". "),(0,a.kt)("li",{parentName:"ul"},"Wallet will then use the ",(0,a.kt)("inlineCode",{parentName:"li"},"privKey1")," which has access to call ",(0,a.kt)("inlineCode",{parentName:"li"},"claim")," and ",(0,a.kt)("inlineCode",{parentName:"li"},"create_account_and_claim")," in order to call ",(0,a.kt)("inlineCode",{parentName:"li"},"create_account_and_claim")," on the contract.",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"It will pass in ",(0,a.kt)("inlineCode",{parentName:"li"},"pubKey2")," which will be used to create a full access key for the new account."))),(0,a.kt)("li",{parentName:"ul"},"The contract will create the new account and transfer the funds to it alongside any NFT or fungible tokens pre-loaded.")),(0,a.kt)("h1",{id:"getting-started"},"Getting Started"),(0,a.kt)("p",null,"There are several ways to get started using Keypom. You can use the NEAR CLI, our Keypom application, our Keypom SDK and more. In this section, we will go over how you can interact with Keypom and create drops using the NEAR-API-JS library and write simple node scripts."),(0,a.kt)("h2",{id:"prerequisites"},"Prerequisites"),(0,a.kt)("p",null,"In order to successfully interact with this contract using the deploy scripts, you should have the following: "),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://docs.near.org/concepts/basics/account"},"NEAR account")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://docs.npmjs.com/downloading-and-installing-node-js-and-npm"},"Node JS"))),(0,a.kt)("h2",{id:"deploy-scripts"},"Deploy Scripts"),(0,a.kt)("p",null,"There are 4 deploy scripts that have been made available for you to use and easily create Keypom links. These are for:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Simple Drops"),(0,a.kt)("li",{parentName:"ul"},"NFT Drops"),(0,a.kt)("li",{parentName:"ul"},"FT Drops"),(0,a.kt)("li",{parentName:"ul"},"Function Call Drops")),(0,a.kt)("p",null,"In order to use these scripts, open the ",(0,a.kt)("inlineCode",{parentName:"p"},"deploy/")," directory and modify the ",(0,a.kt)("inlineCode",{parentName:"p"},"configurations.js")," file for the drop you want to create. In this file, you can specify important information such as the number of keys you wish to create, the amount of $NEAR you want to send, how many uses per key etc."),(0,a.kt)("p",null,"You must specify the account that you will fund the drops with under the ",(0,a.kt)("inlineCode",{parentName:"p"},"FUNDING_ACCOUNT_ID")," variable. This account needs to have keys stored in your ",(0,a.kt)("inlineCode",{parentName:"p"},"~/.near-credentials")," folder. To do this, simply run ",(0,a.kt)("inlineCode",{parentName:"p"},"near login")," on your terminal and follow the prompts using the NEAR CLI."),(0,a.kt)("p",null,"Once the ",(0,a.kt)("inlineCode",{parentName:"p"},"configurations.js")," file has been modified to your liking, navigate back to the\nroot directory and run the deploy script."),(0,a.kt)("p",null,"For simple drops:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"yarn simple\n")),(0,a.kt)("p",null,"For FT drops:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"yarn ft\n")),(0,a.kt)("p",null,"For NFT drops:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"yarn nft\n")),(0,a.kt)("p",null,"For Function Call drops:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre"},"yarn fc\n")))}p.isMDXComponent=!0}}]);